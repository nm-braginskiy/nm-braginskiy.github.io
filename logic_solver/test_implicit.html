<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Тест неявного умножения</title>
  <style>
    body { font-family: monospace; padding: 20px; background: #1a1a2e; color: #fff; }
    .test { margin: 10px 0; padding: 10px; background: #16213e; border-radius: 5px; }
    .input { color: #7ec8e3; }
    .output { color: #50fa7b; }
    .error { color: #ff6b6b; }
  </style>
</head>
<body>
  <h1>Тест автоматической вставки умножения</h1>
  <div id="results"></div>

  <script src="tokenizer.js"></script>
  <script src="parser.js"></script>
  <script>
    const tests = [
      'ab',
      'abc',
      'a(b+c)',
      '(a+b)c',
      '(a+b)(c+d)',
      '2a',
      '1(a+b)',
      'a1',
      '(a+b)1'
    ];

    const resultsDiv = document.getElementById('results');

    tests.forEach(input => {
      const div = document.createElement('div');
      div.className = 'test';
      
      try {
        const tokens = tokenize(input);
        const ast = parse(tokens);
        const output = astToStr(ast);
        
        div.innerHTML = `
          <div class="input">Ввод: ${input}</div>
          <div class="output">Результат: ${output}</div>
          <div style="color: #888; font-size: 0.9em;">Токены: ${JSON.stringify(tokens.map(t => t.implicit ? `*[implicit]` : (t.value || t.type)))}</div>
        `;
      } catch (e) {
        div.innerHTML = `
          <div class="input">Ввод: ${input}</div>
          <div class="error">Ошибка: ${e.message}</div>
        `;
      }
      
      resultsDiv.appendChild(div);
    });
  </script>
</body>
</html>
